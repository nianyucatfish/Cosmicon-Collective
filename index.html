<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>流萤 - 镭射金属卡牌交互</title>
    <style>
        /* 基础页面重置与居中 */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #1a1b26;
            /* 深色背景更能凸显镭射光泽 */
            font-family: sans-serif;
            /* 设置透视点，让内部元素的 3D 旋转有纵深感 */
            perspective: 1200px;
        }

        /* 卡牌外框容器（包含镭射边框效果） */
        .card-container {
            width: 524px;
            height: 753px;
            position: relative;
            border-radius: 20px;
            cursor: pointer;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6);

            /* 开启 3D 渲染上下文 */
            transform-style: preserve-3d;

            /* 绑定动态 CSS 变量进行 3D 旋转 */
            transform: rotateX(var(--rotate-x, 0deg)) rotateY(var(--rotate-y, 0deg));
            transition: transform 0.1s ease-out;
            /* 鼠标移动时的微小缓冲 */
            overflow: hidden;
        }

        /* 第三层：背景（最里层） */
        .card-bg {
            position: absolute;
            inset: 0;
            border-radius: 20px;
            z-index: 1;
            background-color: #2a2c38;
            background-image: url('背景.png');
            background-size: cover;
            background-position: center;
            transform: translate3d(calc(var(--parallax-x, 0px) * 0.4), calc(var(--parallax-y, 0px) * 0.4), -35px) scale(1.04);
            transition: transform 0.1s ease-out;
        }

        /* 第二层：角色 */
        .card-character {
            position: absolute;
            inset: 0;
            border-radius: 20px;
            z-index: 4;
            pointer-events: none;
            background-image: url('流萤.png');
            background-size: cover;
            background-position: center;
            transform-origin: 50% 82%;
            transform: translate3d(calc(var(--parallax-x, 0px) * 1.05), calc(var(--parallax-y, 0px) * 1.05), 70px) rotateX(-15deg);
            transition: transform 0.1s ease-out;
        }

        /* 边框纹理层：通过遮罩只显示边框区域 */
        .card-frame {
            position: absolute;
            inset: 0;
            border-radius: 20px;
            z-index: 3;
            pointer-events: none;

            /* 镭射金属渐变纹理 */
            background: linear-gradient(115deg,
                    rgba(255, 255, 255, 1) 0%,
                    rgba(255, 154, 158, 1) 15%,
                    rgba(161, 196, 253, 1) 35%,
                    rgba(255, 255, 255, 1) 50%,
                    rgba(212, 252, 121, 1) 65%,
                    rgba(255, 203, 242, 1) 85%,
                    rgba(255, 255, 255, 1) 100%);
            background-size: 300% 300%;
            background-position: var(--bg-x, 50%) var(--bg-y, 50%);

            /* 使用遮罩图限制纹理只出现在边框 */
            -webkit-mask-image: url('card-border-mask.png');
            -webkit-mask-size: 100% 100%;
            -webkit-mask-repeat: no-repeat;
            -webkit-mask-position: center;
            mask-image: url('card-border-mask.png');
            mask-size: 100% 100%;
            mask-repeat: no-repeat;
            mask-position: center;

            transform: translate3d(calc(var(--parallax-x, 0px) * 1.2), calc(var(--parallax-y, 0px) * 1.2), 46px);
            transition: transform 0.1s ease-out;
        }


        /* 扫光反光层（模拟镜面反光） */
        .card-glare {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 20px;
            z-index: 5;
            pointer-events: none;
            /* 防止遮挡鼠标事件 */
            /* 使用更柔和的线性扫光，避免“点光源”效果 */
            mix-blend-mode: screen;
            background: linear-gradient(120deg,
                    rgba(255, 255, 255, 0) 20%,
                    rgba(255, 255, 255, 0.35) 45%,
                    rgba(255, 255, 255, 0.12) 55%,
                    rgba(255, 255, 255, 0) 80%);
            background-size: 220% 220%;
            background-position: var(--sheen-x, 50%) 50%;
            opacity: 0.18;
            transition: opacity 0.3s ease;

            transform: translate3d(calc(var(--parallax-x, 0px) * 1.35), calc(var(--parallax-y, 0px) * 1.35), 58px);
        }

        /* 当鼠标悬浮时显示高光 */
        .card-container:hover .card-glare {
            opacity: 0.35;
        }
    </style>
</head>

<body>

    <div class="card-container" id="holoCard">
        <div class="card-bg"></div>
        <div class="card-character"></div>
        <div class="card-frame"></div>
        <div class="card-glare"></div>
    </div>

    <script>
        const card = document.getElementById('holoCard');

        // 鼠标在卡牌上移动时的交互
        card.addEventListener('mousemove', (e) => {
            // 获取卡牌在视口中的位置
            const rect = card.getBoundingClientRect();

            // 计算鼠标在卡牌内部的相对坐标 (0 ~ 宽度/高度)
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // 计算卡牌的中心点
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;

            // 计算旋转角度 (最大旋转角度为 ±15度)
            // 鼠标在左侧时，卡牌向左翻转 (Y轴负旋转)；鼠标在上方时，卡牌向上翻转 (X轴正旋转)
            const rotateX = ((centerY - y) / centerY) * 15;
            const rotateY = ((x - centerX) / centerX) * 15;

            // 计算背景流光和高光点的位置百分比 (0% ~ 100%)
            const percentageX = (x / rect.width) * 100;
            const percentageY = (y / rect.height) * 100;

            // 视差位移量（像素）
            const offsetX = ((x - centerX) / centerX) * 26;
            const offsetY = ((y - centerY) / centerY) * 26;

            // 通过 CSS 变量将计算出的值动态注入
            card.style.setProperty('--rotate-x', `${rotateX}deg`);
            card.style.setProperty('--rotate-y', `${rotateY}deg`);
            card.style.setProperty('--bg-x', `${percentageX}%`);
            card.style.setProperty('--bg-y', `${percentageY}%`);
            card.style.setProperty('--sheen-x', `${percentageX}%`);
            card.style.setProperty('--parallax-x', `${offsetX}px`);
            card.style.setProperty('--parallax-y', `${offsetY}px`);
        });

        // 鼠标离开卡牌时的恢复重置动画
        card.addEventListener('mouseleave', () => {
            // 离开时加长过渡时间，实现“缓慢回正”的物理惯性感
            card.style.transition = 'transform 0.5s ease-out';

            card.style.setProperty('--rotate-x', `0deg`);
            card.style.setProperty('--rotate-y', `0deg`);
            card.style.setProperty('--bg-x', `50%`);
            card.style.setProperty('--bg-y', `50%`);
            card.style.setProperty('--sheen-x', `50%`);
            card.style.setProperty('--parallax-x', `0px`);
            card.style.setProperty('--parallax-y', `0px`);

            // 回正后恢复原有的灵敏过渡时间
            setTimeout(() => {
                card.style.transition = 'transform 0.1s ease-out';
            }, 500);
        });
    </script>

</body>

</html>